<sequence version="3.10"><referenceList><reference package="OPC0024C"/></referenceList><group name="Connect to UNC path containing source" description=""><step type="SMS_TaskSequence_ConnectNetworkFolderAction" name="Connect to Network Folder containing Windows 10" description="Connect to Network Folder containing Windows 10 source files. We do not want to copy Install.wim for Compatibility tests" runIn="WinPEandFullOS" successCodeList="0" retryCount="0" runFromNet="false"><action>smsnetuse.exe %SMSConnectNetworkFolderPath%</action><defaultVarList><variable name="SMSConnectNetworkFolderDriveLetter" property="DriveLetter">M:</variable><variable name="SMSConnectNetworkFolderPassword" property="Password"></variable><variable name="SMSConnectNetworkFolderPath" property="Path">\\Server\Share\Windows10Media</variable><variable name="SMSConnectNetworkFolderAccount" property="Username">%user%</variable></defaultVarList></step></group><group name="Run Upgrade Compatibility Check" description=""><step type="SMS_TaskSequence_UpgradeOperatingSystemAction" name="Upgrade Operating System /Compat ScanOnly" description="Continue on Error is set so we capture information for that clients that aren't ready for upgrade as well" continueOnError="true" runIn="FullOS" successCodeList="0" retryCount="0" runFromNet="false"><action>OSDUpgradeOS.exe </action><defaultVarList><variable name="OSDUpgradeDynamicUpdateSettings" property="DynamicUpdateSettings">Disable</variable><variable name="OSDUpgradeIgnoreMessages" property="IgnoreMessages">false</variable><variable name="OSDUpgradeInstallEditionIndex" property="InstallEditionIndex">3</variable><variable name="OSDUpgradeInstallPackageID" property="InstallPackageID">OPC0024C</variable><variable name="OSDUpgradeInstallPath" property="InstallPath"></variable><variable name="OSDUpgradeOsProductKey" property="OsProductKey"></variable><variable name="OSDUpgradePreserveSettings" property="PreserveSettings">Upgrade</variable><variable name="OSDUpgradeScanOnly" property="ScanOnly">true</variable><variable name="OSDUpgradeStagedContent" property="StagedContent"></variable></defaultVarList></step><step type="SMS_TaskSequence_RebootAction" name="Restart Computer - not needed" description="" disable="true" runIn="WinPEandFullOS" successCodeList="0" retryCount="0" runFromNet="false"><action>smsboot.exe /target:HD</action><defaultVarList><variable name="SMSRebootMessage" property="Message">Microsoft Windows operating system is being upgraded. The computer must reboot to continue.</variable><variable name="SMSRebootTimeout" property="MessageTimeout">10</variable><variable name="SMSRebootTarget" property="Target" hidden="true">HD</variable></defaultVarList></step></group><group name="Check _SMSTSOSUpgradeActionReturnCode output" description="Capture Machines ready for upgrade. 3247440400 is the Decimal value of the Exit code returns from Setup.exe. If the code matches then the machine is not ready for upgrade"><condition><expression type="SMS_TaskSequence_VariableConditionExpression"><variable name="Operator">equals</variable><variable name="Value">3247440400</variable><variable name="Variable">_SMSTSOSUpgradeActionReturnCode</variable></expression></condition><step type="SMS_TaskSequence_RunCommandLineAction" name="Write Machine Name to folder - READY for upgrade" description="" runIn="WinPEandFullOS" successCodeList="0 3010" retryCount="0" runFromNet="false"><action>smsswd.exe /run: cmd /c echo %computername% %time% %date% &gt;&gt; \\novafs01\osd\bobmn\OSUpgrade\UpgradeReady\%computername%.txt</action><defaultVarList><variable name="CommandLine" property="CommandLine" hidden="true">cmd /c echo %computername% %time% %date% &gt;&gt; \\novafs01\osd\bobmn\OSUpgrade\UpgradeReady\%computername%.txt</variable><variable name="SMSTSDisableWow64Redirection" property="DisableWow64Redirection">false</variable><variable name="_SMSTSRunCommandLineAsUser" property="RunAsUser">false</variable><variable name="SuccessCodes" property="SuccessCodes" hidden="true">0 3010</variable></defaultVarList></step><step type="SMS_TaskSequence_RunCommandLineAction" name="Write marker to CCM" description="Use this file to create a collection - works with File Inventory" runIn="WinPEandFullOS" successCodeList="0 3010" retryCount="0" runFromNet="false"><action>smsswd.exe /run: cmd /c echo %computername% %time% %date% &gt;&gt; %windir%\CCM\OSUpgradeReady.txt</action><defaultVarList><variable name="CommandLine" property="CommandLine" hidden="true">cmd /c echo %computername% %time% %date% &gt;&gt; %windir%\CCM\OSUpgradeReady.txt</variable><variable name="SMSTSDisableWow64Redirection" property="DisableWow64Redirection">false</variable><variable name="_SMSTSRunCommandLineAsUser" property="RunAsUser">false</variable><variable name="SuccessCodes" property="SuccessCodes" hidden="true">0 3010</variable></defaultVarList></step></group><group name="Check _SMSTSOSUpgradeActionReturnCode output" description="Capture Machines ready for upgrade. 3247440400 is the Decimal value of the Exit code returns from Setup.exe, if the code does not match then the machine is not ready for upgrade"><condition><expression type="SMS_TaskSequence_VariableConditionExpression"><variable name="Operator">equals</variable><variable name="Value">3247440400</variable><variable name="Variable">_SMSTSOSUpgradeActionReturnCode</variable></expression></condition><step type="SMS_TaskSequence_RunCommandLineAction" name="Write Machine Name to folder - NOT set for upgrade" description="" runIn="WinPEandFullOS" successCodeList="0 3010" retryCount="0" runFromNet="false"><action>smsswd.exe /run: cmd /c echo %computername% %time% %date% &gt;&gt; \\novafs01\osd\bobmn\OSUpgrade\UpgradeNOTReady\%computername%.txt</action><defaultVarList><variable name="CommandLine" property="CommandLine" hidden="true">cmd /c echo %computername% %time% %date% &gt;&gt; \\novafs01\osd\bobmn\OSUpgrade\UpgradeNOTReady\%computername%.txt</variable><variable name="SMSTSDisableWow64Redirection" property="DisableWow64Redirection">false</variable><variable name="_SMSTSRunCommandLineAsUser" property="RunAsUser">false</variable><variable name="SuccessCodes" property="SuccessCodes" hidden="true">0 3010</variable></defaultVarList></step><step type="SMS_TaskSequence_RunCommandLineAction" name="Write marker to CCM" description="Use this file to create a collection - works with File Inventory" runIn="WinPEandFullOS" successCodeList="0 3010" retryCount="0" runFromNet="false"><action>smsswd.exe /run: cmd /c echo %computername% %time% %date% &gt;&gt; %windir%\CCM\OSUpgradeNOTReady.txt</action><defaultVarList><variable name="CommandLine" property="CommandLine" hidden="true">cmd /c echo %computername% %time% %date% &gt;&gt; %windir%\CCM\OSUpgradeNOTReady.txt</variable><variable name="SMSTSDisableWow64Redirection" property="DisableWow64Redirection">false</variable><variable name="_SMSTSRunCommandLineAsUser" property="RunAsUser">false</variable><variable name="SuccessCodes" property="SuccessCodes" hidden="true">0 3010</variable></defaultVarList></step></group><group name="_SMSTSOSUpgradeActionReturnCode output = C1900208" description="Capture Machines ready for upgrade. Not ready due to Compatibility issues found (hard block):  0xC1900208"><condition><expression type="SMS_TaskSequence_VariableConditionExpression"><variable name="Operator">equals</variable><variable name="Value">3247440400</variable><variable name="Variable">_SMSTSOSUpgradeActionReturnCode</variable></expression></condition><step type="SMS_TaskSequence_RunCommandLineAction" name="Compatibility issues found:  0xC1900208" description="" runIn="WinPEandFullOS" successCodeList="0 3010" retryCount="0" runFromNet="false"><action>smsswd.exe /run: cmd /c echo %computername% %time% %date% &gt;&gt; \\novafs01\osd\bobmn\OSUpgrade\UpgradeReady\%computername%.txt</action><defaultVarList><variable name="CommandLine" property="CommandLine" hidden="true">cmd /c echo %computername% %time% %date% &gt;&gt; \\novafs01\osd\bobmn\OSUpgrade\UpgradeReady\%computername%.txt</variable><variable name="SMSTSDisableWow64Redirection" property="DisableWow64Redirection">false</variable><variable name="_SMSTSRunCommandLineAsUser" property="RunAsUser">false</variable><variable name="SuccessCodes" property="SuccessCodes" hidden="true">0 3010</variable></defaultVarList></step><step type="SMS_TaskSequence_RunCommandLineAction" name="Write marker to CCM" description="Use this file to create a collection - works with File Inventory" runIn="WinPEandFullOS" successCodeList="0 3010" retryCount="0" runFromNet="false"><action>smsswd.exe /run: cmd /c echo %computername% %time% %date% &gt;&gt; %windir%\CCM\C1900208.txt</action><defaultVarList><variable name="CommandLine" property="CommandLine" hidden="true">cmd /c echo %computername% %time% %date% &gt;&gt; %windir%\CCM\C1900208.txt</variable><variable name="SMSTSDisableWow64Redirection" property="DisableWow64Redirection">false</variable><variable name="_SMSTSRunCommandLineAsUser" property="RunAsUser">false</variable><variable name="SuccessCodes" property="SuccessCodes" hidden="true">0 3010</variable></defaultVarList></step></group><group name="_SMSTSOSUpgradeActionReturnCode output = C1900204" description="Migration choice (auto upgrade) not available (probably the wrong SKU or architecture)Â· 0xC1900204"><condition><expression type="SMS_TaskSequence_VariableConditionExpression"><variable name="Operator">equals</variable><variable name="Value">3247440400</variable><variable name="Variable">_SMSTSOSUpgradeActionReturnCode</variable></expression></condition><step type="SMS_TaskSequence_RunCommandLineAction" name="Invalid migration choice: 0xC1900204" description="" runIn="WinPEandFullOS" successCodeList="0 3010" retryCount="0" runFromNet="false"><action>smsswd.exe /run: cmd /c echo %computername% %time% %date% &gt;&gt; \\novafs01\osd\bobmn\OSUpgrade\UpgradeReady\%computername%.txt</action><defaultVarList><variable name="CommandLine" property="CommandLine" hidden="true">cmd /c echo %computername% %time% %date% &gt;&gt; \\novafs01\osd\bobmn\OSUpgrade\UpgradeReady\%computername%.txt</variable><variable name="SMSTSDisableWow64Redirection" property="DisableWow64Redirection">false</variable><variable name="_SMSTSRunCommandLineAsUser" property="RunAsUser">false</variable><variable name="SuccessCodes" property="SuccessCodes" hidden="true">0 3010</variable></defaultVarList></step><step type="SMS_TaskSequence_RunCommandLineAction" name="Write marker to CCM" description="Use this file to create a collection - works with File Inventory" runIn="WinPEandFullOS" successCodeList="0 3010" retryCount="0" runFromNet="false"><action>smsswd.exe /run: cmd /c echo %computername% %time% %date% &gt;&gt; %windir%\CCM\C1900204.txt</action><defaultVarList><variable name="CommandLine" property="CommandLine" hidden="true">cmd /c echo %computername% %time% %date% &gt;&gt; %windir%\CCM\C1900204.txt</variable><variable name="SMSTSDisableWow64Redirection" property="DisableWow64Redirection">false</variable><variable name="_SMSTSRunCommandLineAsUser" property="RunAsUser">false</variable><variable name="SuccessCodes" property="SuccessCodes" hidden="true">0 3010</variable></defaultVarList></step></group><group name="_SMSTSOSUpgradeActionReturnCode output = C1900200" description="Does not meet system requirements for Windows 10: 0xC1900200"><condition><expression type="SMS_TaskSequence_VariableConditionExpression"><variable name="Operator">equals</variable><variable name="Value">3247440400</variable><variable name="Variable">_SMSTSOSUpgradeActionReturnCode</variable></expression></condition><step type="SMS_TaskSequence_RunCommandLineAction" name="System requirements for Windows 10 fail: C1900200" description="" runIn="WinPEandFullOS" successCodeList="0 3010" retryCount="0" runFromNet="false"><action>smsswd.exe /run: cmd /c echo %computername% %time% %date% &gt;&gt; \\novafs01\osd\bobmn\OSUpgrade\UpgradeReady\%computername%.txt</action><defaultVarList><variable name="CommandLine" property="CommandLine" hidden="true">cmd /c echo %computername% %time% %date% &gt;&gt; \\novafs01\osd\bobmn\OSUpgrade\UpgradeReady\%computername%.txt</variable><variable name="SMSTSDisableWow64Redirection" property="DisableWow64Redirection">false</variable><variable name="_SMSTSRunCommandLineAsUser" property="RunAsUser">false</variable><variable name="SuccessCodes" property="SuccessCodes" hidden="true">0 3010</variable></defaultVarList></step><step type="SMS_TaskSequence_RunCommandLineAction" name="Write marker to CCM" description="Use this file to create a collection - works with File Inventory" runIn="WinPEandFullOS" successCodeList="0 3010" retryCount="0" runFromNet="false"><action>smsswd.exe /run: cmd /c echo %computername% %time% %date% &gt;&gt; %windir%\CCM\C1900200.txt</action><defaultVarList><variable name="CommandLine" property="CommandLine" hidden="true">cmd /c echo %computername% %time% %date% &gt;&gt; %windir%\CCM\C1900200.txt</variable><variable name="SMSTSDisableWow64Redirection" property="DisableWow64Redirection">false</variable><variable name="_SMSTSRunCommandLineAsUser" property="RunAsUser">false</variable><variable name="SuccessCodes" property="SuccessCodes" hidden="true">0 3010</variable></defaultVarList></step></group><group name="_SMSTSOSUpgradeActionReturnCode output = C190020E" description="Insufficient free disk space: 0xC190020E"><condition><expression type="SMS_TaskSequence_VariableConditionExpression"><variable name="Operator">equals</variable><variable name="Value">3247440400</variable><variable name="Variable">_SMSTSOSUpgradeActionReturnCode</variable></expression></condition><step type="SMS_TaskSequence_RunCommandLineAction" name="System requirements for Windows 10 fail: C1900200" description="" runIn="WinPEandFullOS" successCodeList="0 3010" retryCount="0" runFromNet="false"><action>smsswd.exe /run: cmd /c echo %computername% %time% %date% &gt;&gt; \\novafs01\osd\bobmn\OSUpgrade\UpgradeReady\%computername%.txt</action><defaultVarList><variable name="CommandLine" property="CommandLine" hidden="true">cmd /c echo %computername% %time% %date% &gt;&gt; \\novafs01\osd\bobmn\OSUpgrade\UpgradeReady\%computername%.txt</variable><variable name="SMSTSDisableWow64Redirection" property="DisableWow64Redirection">false</variable><variable name="_SMSTSRunCommandLineAsUser" property="RunAsUser">false</variable><variable name="SuccessCodes" property="SuccessCodes" hidden="true">0 3010</variable></defaultVarList></step><step type="SMS_TaskSequence_RunCommandLineAction" name="Write marker to CCM" description="Use this file to create a collection - works with File Inventory" runIn="WinPEandFullOS" successCodeList="0 3010" retryCount="0" runFromNet="false"><action>smsswd.exe /run: cmd /c echo %computername% %time% %date% &gt;&gt; %windir%\CCM\C190020E.txt</action><defaultVarList><variable name="CommandLine" property="CommandLine" hidden="true">cmd /c echo %computername% %time% %date% &gt;&gt; %windir%\CCM\C190020E.txt</variable><variable name="SMSTSDisableWow64Redirection" property="DisableWow64Redirection">false</variable><variable name="_SMSTSRunCommandLineAsUser" property="RunAsUser">false</variable><variable name="SuccessCodes" property="SuccessCodes" hidden="true">0 3010</variable></defaultVarList></step></group></sequence>
